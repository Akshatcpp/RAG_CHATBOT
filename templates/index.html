<!DOCTYPE html>

<html lang="en">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>Notes Chatbot</title>

Â  Â  <style>

Â  Â  Â  Â  * {

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  Â  Â  padding: 0;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;

Â  Â  Â  Â  }



Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;

Â  Â  Â  Â  Â  Â  background-color: #883838;

Â  Â  Â  Â  Â  Â  height: 100vh;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  justify-content: center;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-container {

Â  Â  Â  Â  Â  Â  width: 90%;

Â  Â  Â  Â  Â  Â  max-width: 800px;

Â  Â  Â  Â  Â  Â  height: 90vh;

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-radius: 12px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  Â  Â  overflow: hidden;

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-header {

Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #1e1e22 0%, #917b9f 100%);

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  position: relative;

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-header h1 {

Â  Â  Â  Â  Â  Â  font-size: 24px;

Â  Â  Â  Â  Â  Â  font-weight: 600;

Â  Â  Â  Â  Â  Â  margin-bottom: 5px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-header p {

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  Â  Â  opacity: 0.9;

Â  Â  Â  Â  }



Â  Â  Â  Â  .settings-btn {

Â  Â  Â  Â  Â  Â  position: absolute;

Â  Â  Â  Â  Â  Â  right: 20px;

Â  Â  Â  Â  Â  Â  top: 50%;

Â  Â  Â  Â  Â  Â  transform: translateY(-50%);

Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.2);

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  width: 40px;

Â  Â  Â  Â  Â  Â  height: 40px;

Â  Â  Â  Â  Â  Â  border-radius: 50%;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  Â  Â  transition: background 0.3s;

Â  Â  Â  Â  }



Â  Â  Â  Â  .settings-btn:hover {

Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.3);

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-messages {

Â  Â  Â  Â  Â  Â  flex: 1;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  overflow-y: auto;

Â  Â  Â  Â  Â  Â  background: #fafafa;

Â  Â  Â  Â  }



Â  Â  Â  Â  .message {

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: flex-start;

Â  Â  Â  Â  Â  Â  gap: 12px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .message.user {

Â  Â  Â  Â  Â  Â  flex-direction: row-reverse;

Â  Â  Â  Â  }



Â  Â  Â  Â  .message-avatar {

Â  Â  Â  Â  Â  Â  width: 36px;

Â  Â  Â  Â  Â  Â  height: 36px;

Â  Â  Â  Â  Â  Â  border-radius: 50%;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  justify-content: center;

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  Â  Â  flex-shrink: 0;

Â  Â  Â  Â  }



Â  Â  Â  Â  .message.user .message-avatar {

Â  Â  Â  Â  Â  Â  background: #667eea;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  }



Â  Â  Â  Â  .message.bot .message-avatar {

Â  Â  Â  Â  Â  Â  background: #e0e0e0;

Â  Â  Â  Â  Â  Â  color: #666;

Â  Â  Â  Â  }



Â  Â  Â  Â  .message-content {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  padding: 12px 16px;

Â  Â  Â  Â  Â  Â  border-radius: 18px;

Â  Â  Â  Â  Â  Â  max-width: 70%;

Â  Â  Â  Â  Â  Â  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

Â  Â  Â  Â  Â  Â  line-height: 1.5;

Â  Â  Â  Â  }



Â  Â  Â  Â  .message.user .message-content {

Â  Â  Â  Â  Â  Â  background: #667eea;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  }



Â  Â  Â  Â  .welcome-message {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  color: #666;

Â  Â  Â  Â  Â  Â  padding: 40px 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .welcome-message h2 {

Â  Â  Â  Â  Â  Â  font-size: 24px;

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  Â  Â  color: #333;

Â  Â  Â  Â  }



Â  Â  Â  Â  .welcome-message p {

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  margin-bottom: 30px;

Â  Â  Â  Â  Â  Â  line-height: 1.6;

Â  Â  Â  Â  }



Â  Â  Â  Â  .welcome-message .tip {

Â  Â  Â  Â  Â  Â  margin-top: 40px;

Â  Â  Â  Â  Â  Â  font-size: 12px;

Â  Â  Â  Â  Â  Â  color: #999;

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-input-container {

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-top: 1px solid #eee;

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-input-wrapper {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  gap: 12px;

Â  Â  Â  Â  Â  Â  align-items: flex-end;

Â  Â  Â  Â  }



Â  Â  Â  Â  .input-group {

Â  Â  Â  Â  Â  Â  flex: 1;

Â  Â  Â  Â  Â  Â  position: relative;

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-input {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  padding: 12px 50px 12px 16px;

Â  Â  Â  Â  Â  Â  border: 2px solid #e0e0e0;

Â  Â  Â  Â  Â  Â  border-radius: 25px;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  resize: none;

Â  Â  Â  Â  Â  Â  min-height: 50px;

Â  Â  Â  Â  Â  Â  max-height: 120px;

Â  Â  Â  Â  Â  Â  outline: none;

Â  Â  Â  Â  Â  Â  transition: border-color 0.3s;

Â  Â  Â  Â  }



Â  Â  Â  Â  .chat-input:focus {

Â  Â  Â  Â  Â  Â  border-color: #667eea;

Â  Â  Â  Â  }



Â  Â  Â  Â  .tools-btn {

Â  Â  Â  Â  Â  Â  position: absolute;

Â  Â  Â  Â  Â  Â  right: 15px;

Â  Â  Â  Â  Â  Â  top: 50%;

Â  Â  Â  Â  Â  Â  transform: translateY(-50%);

Â  Â  Â  Â  Â  Â  background: none;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  color: #666;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  padding: 5px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .send-btn {

Â  Â  Â  Â  Â  Â  background: #040817;

Â  Â  Â  Â  Â  Â  color: rgb(141, 125, 125);

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  width: 50px;

Â  Â  Â  Â  Â  Â  height: 50px;

Â  Â  Â  Â  Â  Â  border-radius: 50%;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  Â  Â  transition: background 0.3s;

Â  Â  Â  Â  Â  Â  flex-shrink: 0;

Â  Â  Â  Â  }



Â  Â  Â  Â  .send-btn:hover {

Â  Â  Â  Â  Â  Â  background: #5a6fd8;

Â  Â  Â  Â  }



Â  Â  Â  Â  .send-btn:disabled {

Â  Â  Â  Â  Â  Â  background: #ccc;

Â  Â  Â  Â  Â  Â  cursor: not-allowed;

Â  Â  Â  Â  }



Â  Â  Â  Â  .typing-indicator {

Â  Â  Â  Â  Â  Â  display: none;

Â  Â  Â  Â  Â  Â  padding: 12px 16px;

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-radius: 18px;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

Â  Â  Â  Â  }



Â  Â  Â  Â  .typing-dots {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  gap: 4px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .typing-dot {

Â  Â  Â  Â  Â  Â  width: 8px;

Â  Â  Â  Â  Â  Â  height: 8px;

Â  Â  Â  Â  Â  Â  background: #ccc;

Â  Â  Â  Â  Â  Â  border-radius: 50%;

Â  Â  Â  Â  Â  Â  animation: typing 1.4s infinite;

Â  Â  Â  Â  }



Â  Â  Â  Â  .typing-dot:nth-child(2) {

Â  Â  Â  Â  Â  Â  animation-delay: 0.2s;

Â  Â  Â  Â  }



Â  Â  Â  Â  .typing-dot:nth-child(3) {

Â  Â  Â  Â  Â  Â  animation-delay: 0.4s;

Â  Â  Â  Â  }



Â  Â  Â  Â  @keyframes typing {

Â  Â  Â  Â  Â  Â  0%, 60%, 100% {

Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(0);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  30% {

Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(-10px);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  .error-message {

Â  Â  Â  Â  Â  Â  background: #ffebee;

Â  Â  Â  Â  Â  Â  color: #c62828;

Â  Â  Â  Â  Â  Â  padding: 12px 16px;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  border-left: 4px solid #c62828;

Â  Â  Â  Â  }



Â  Â  Â  Â  @media (max-width: 768px) {

Â  Â  Â  Â  Â  Â  .chat-container {

Â  Â  Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  Â  Â  height: 100vh;

Â  Â  Â  Â  Â  Â  Â  Â  border-radius: 0;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  .message-content {

Â  Â  Â  Â  Â  Â  Â  Â  max-width: 85%;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  .chat-header h1 {

Â  Â  Â  Â  Â  Â  Â  Â  font-size: 20px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  </style>

</head>

<body>

Â  Â  <div class="chat-container">

Â  Â  Â  Â  <div class="chat-header">

Â  Â  Â  Â  Â  Â  <h1>ğŸ“š Notes Chatbot</h1>

Â  Â  Â  Â  Â  Â  <p>Powered by NLP - Ask me anything about your notes!</p>

Â  Â  Â  Â  Â  Â  <button class="settings-btn" onclick="toggleSources()" title="Toggle Sources">âš™ï¸</button>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div class="chat-messages" id="chatMessages">

Â  Â  Â  Â  Â  Â  <div class="welcome-message">

Â  Â  Â  Â  Â  Â  Â  Â  <h2>How can I help you today?</h2>

Â  Â  Â  Â  Â  Â  Â  Â  <p>I can help you find information from your notes and answer questions about them. What would you like to know?</p>

Â  Â  Â  Â  Â  Â  Â  Â  <p class="tip">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong></strong> Developed by Akshat at IIITA

Â  Â  Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div class="typing-indicator" id="typingIndicator">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="typing-dots">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="typing-dot"></div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="typing-dot"></div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="typing-dot"></div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <span style="margin-left: 10px; color: #666; font-size: 14px;">ğŸ¤” Thinking...</span>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div class="chat-input-container">

Â  Â  Â  Â  Â  Â  <div class="chat-input-wrapper">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textareaÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="chat-input"Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id="messageInput"Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Ask anything..."

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rows="1"

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onkeydown="handleKeyDown(event)"

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  oninput="autoResize(this)"

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="tools-btn" title="Tools">ğŸ”§</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button class="send-btn" id="sendBtn" onclick="sendMessage()">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="sendIcon">â¤</span>

Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <script>

Â  Â  Â  Â  let showSources = false;

Â  Â  Â  Â  let isWelcomeVisible = true;



Â  Â  Â  Â  function toggleSources() {

Â  Â  Â  Â  Â  Â  showSources = !showSources;

Â  Â  Â  Â  Â  Â  const btn = document.querySelector('.settings-btn');

Â  Â  Â  Â  Â  Â  btn.style.background = showSources ? 'rgba(255, 255, 255, 0.3)' : 'rgba(255, 255, 255, 0.2)';

Â  Â  Â  Â  }



Â  Â  Â  Â  function hideWelcome() {

Â  Â  Â  Â  Â  Â  if (isWelcomeVisible) {

Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector('.welcome-message').style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  isWelcomeVisible = false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  function autoResize(textarea) {

Â  Â  Â  Â  Â  Â  textarea.style.height = 'auto';

Â  Â  Â  Â  Â  Â  textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';

Â  Â  Â  Â  }



Â  Â  Â  Â  function handleKeyDown(event) {

Â  Â  Â  Â  Â  Â  if (event.key === 'Enter' && !event.shiftKey) {

Â  Â  Â  Â  Â  Â  Â  Â  event.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  sendMessage();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  function addMessage(content, isUser = false, isError = false) {

Â  Â  Â  Â  Â  Â  const messagesContainer = document.getElementById('chatMessages');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (isError) {

Â  Â  Â  Â  Â  Â  Â  Â  const errorDiv = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  errorDiv.className = 'error-message';

Â  Â  Â  Â  Â  Â  Â  Â  errorDiv.innerHTML = content;

Â  Â  Â  Â  Â  Â  Â  Â  messagesContainer.appendChild(errorDiv);

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  const messageDiv = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  messageDiv.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="message-avatar">${isUser ? 'ğŸ‘¤' : 'ğŸ¤–'}</div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="message-content">${content}</div>

Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  messagesContainer.appendChild(messageDiv);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  messagesContainer.scrollTop = messagesContainer.scrollHeight;

Â  Â  Â  Â  }



Â  Â  Â  Â  function showTyping() {

Â  Â  Â  Â  Â  Â  document.getElementById('typingIndicator').style.display = 'flex';

Â  Â  Â  Â  Â  Â  document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;

Â  Â  Â  Â  }



Â  Â  Â  Â  function hideTyping() {

Â  Â  Â  Â  Â  Â  document.getElementById('typingIndicator').style.display = 'none';

Â  Â  Â  Â  }



Â  Â  Â  Â  async function sendMessage() {

Â  Â  Â  Â  Â  Â  const input = document.getElementById('messageInput');

Â  Â  Â  Â  Â  Â  const sendBtn = document.getElementById('sendBtn');

Â  Â  Â  Â  Â  Â  const message = input.value.trim();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (!message) return;

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  hideWelcome();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Add user message

Â  Â  Â  Â  Â  Â  addMessage(message, true);

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Clear input and disable send button

Â  Â  Â  Â  Â  Â  input.value = '';

Â  Â  Â  Â  Â  Â  input.style.height = 'auto';

Â  Â  Â  Â  Â  Â  sendBtn.disabled = true;

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Show typing indicator

Â  Â  Â  Â  Â  Â  showTyping();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch('/chat', {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message: message,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  show_sources: showSources

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  if (data.error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessage(data.error, false, true);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessage(data.response, false);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (data.sources && showSources) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let sourcesHtml = '<div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;"><strong>Sources:</strong><ul>';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data.sources.forEach(source => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sourcesHtml += `<li><em>${source.source}</em>: ${source.content}</li>`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sourcesHtml += '</ul></div>';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessage(sourcesHtml, false);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  addMessage('Sorry, there was an error processing your request. Please try again.', false, true);

Â  Â  Â  Â  Â  Â  } finally {

Â  Â  Â  Â  Â  Â  Â  Â  hideTyping();

Â  Â  Â  Â  Â  Â  Â  Â  sendBtn.disabled = false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Initialize the chat

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', function() {

Â  Â  Â  Â  Â  Â  document.getElementById('messageInput').focus();

Â  Â  Â  Â  });

Â  Â  </script>

</body>

</html>




